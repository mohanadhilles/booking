(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{566:function(e,t,s){e.exports=s(567)},567:function(e,t,s){s(23),window.moment=s(24),window.VeeValidate=s(43),Vue.use(VeeValidate),Vue.component("ticket-scan",s(581).default),window.app=new Vue({el:"#eventmie_app"})},581:function(e,t,s){"use strict";s.r(t);var a=s(7),n=s.n(a),o=s(4),_=s(364),i=s.n(_),r=s(0);n.a.use(i.a);var l={mixins:[o.a],data:()=>({moment:r,decodedContent:"",errorMessage:"",hide_scanner:0,booking:[]}),methods:{onDecode(e){this.decodedContent=JSON.parse(e),Object.keys(this.decodedContent).length>0&&this.getBooking()},getBooking(){var e=route("eventmie.get_booking"),t={id:this.decodedContent.id,order_number:this.decodedContent.order_number};axios.post(e,t).then(e=>{this.booking=e.data.booking,this.VerifyTicket()}).catch(e=>{var t=n.a.helpers.axiosErrors(e);t.length&&this.serverValidate(t)})},onInit(e){e.then(()=>{console.log("Successfully initilized! Ready for scanning now!")}).catch(e=>{"NotAllowedError"===e.name?this.errorMessage=trans("em.camera_access_required"):"NotFoundError"===e.name?this.errorMessage=trans("em.camera_not_detected"):"NotSupportedError"===e.name?this.errorMessage=trans("em.camera_https_required"):("NotReadableError"===e.name||e.name,this.errorMessage=trans("em.camera_not_detected"))})},VerifyTicket(){document.getElementById("booking_id").value=this.booking.id,document.getElementById("order_number").value=this.booking.order_number,document.getElementById("check_in_button").style.display="block",this.hide_scanner=1}},mounted(){}},d=s(1),g=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[Object.keys(e.booking).length>0?s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped table-hover"},[s("tr",[s("th",[e._v(e._s(e.trans("em.event")))]),e._v(" "),s("td",[e._v(e._s(e.booking.event_title)+" ( "+e._s(e.booking.event_category)+" )")])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.repetitive")))]),e._v(" "),s("td",[e._v(e._s(e.booking.event_repetitive>0?e.trans("em.yes"):e.trans("em.no")))])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.timings")))]),e._v(" "),s("td",[s("p",{staticClass:"text-bold text-small"},[e._v(e._s(e.moment(e.convert_date_to_local(e.booking.event_start_date)).format("MMM DD,YY")+" - "+e.moment(e.convert_date_to_local(e.booking.event_end_date)).format("MMM DD,YY")))]),e._v(" "),s("p",{staticClass:"text-bold text-small"},[e._v(e._s(e.convert_time_to_local(e.booking.event_start_date,e.booking.event_start_time,"hh:mm A")+" - "+e.convert_time_to_local(e.booking.event_end_date,e.booking.event_end_time,"hh:mm A")))])])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.customer")))]),e._v(" "),s("td",[e._v(e._s(e.booking.customer_name)+" ( "+e._s(e.booking.customer_email)+" )")])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.booked_on")))]),e._v(" "),s("td",[e._v(e._s(e.moment(e.convert_date_to_local(e.booking.created_at)).format("MMM DD,YYYY")))])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.order")))]),e._v(" "),s("td",[e._v(e._s(e.booking.order_number))])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.ticket")))]),e._v(" "),s("td",[e._v(e._s(e.booking.ticket_title)+" "),s("strong",[e._v(e._s(" x "+e.booking.quantity))])])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.price")))]),e._v(" "),s("td",[e._v(e._s(e.booking.price+" "+e.booking.currency))])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.payment")))]),e._v(" "),s("td",{staticClass:"text-capitalize"},["offline"==e.booking.payment_type?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-mute"},[e._v("\n                    "+e._s(e.booking.payment_type)+" \n                    "),s("hr",{staticClass:"small"}),e._v(" "),e.booking.is_paid?s("small",{staticClass:"text-small text-success"},[e._v(e._s(e.trans("em.paid")))]):s("small",{staticClass:"text-small text-danger"},[e._v(e._s(e.trans("em.unpaid")))])]):s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-success"},[e._v(e._s(e.booking.payment_type)+" "),s("hr",{staticClass:"small"}),s("small",{staticClass:"text-small"},[e._v(e._s(e.booking.is_paid?e.trans("em.paid"):e.trans("em.unpaid")))])])])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.booking_cancellation")))]),e._v(" "),s("td",[0==e.booking.booking_cancel?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-success"},[e._v(e._s(e.trans("em.no")))]):e._e(),e._v(" "),1==e.booking.booking_cancel?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-warning"},[e._v(e._s(e.trans("em.pending")))]):e._e(),e._v(" "),2==e.booking.booking_cancel?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-info"},[e._v(e._s(e.trans("em.approved")))]):e._e(),e._v(" "),3==e.booking.booking_cancel?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-mute"},[e._v(e._s(e.trans("em.refunded")))]):e._e()])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.checked_in")))]),e._v(" "),s("td",[e.booking.checked_in>0?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-success"},[e._v(e._s(e.trans("em.yes")))]):s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-mute"},[e._v(e._s(e.trans("em.no")))])])]),e._v(" "),s("tr",[s("th",[e._v(e._s(e.trans("em.booking"))+"  "+e._s(e.trans("em.status")))]),e._v(" "),s("td",[1==e.booking.status?s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-success"},[e._v(e._s(e.trans("em.enabled")))]):s("span",{staticClass:"lgx-badge lgx-badge-small lgx-badge-mute"},[e._v(e._s(e.trans("em.disabled")))])])])])]):s("div",[s("div",{staticClass:"alert alert-info"},[s("h5",[s("i",{staticClass:"fas fa-qrcode"}),e._v(" "+e._s(e.trans("em.scan_ticket")))])])]),e._v(" "),""!=e.errorMessage?s("div",{staticClass:"alert alert-danger"},[s("i",{staticClass:"fas fa-camera"}),e._v(" "+e._s(e.errorMessage))]):e._e(),e._v(" "),e.hide_scanner<=0?s("qrcode-stream",{on:{decode:e.onDecode,init:e.onInit}}):e._e()],1)}),[],!1,null,null,null);t.default=g.exports}},[[566,0,1]]]);